{% extends '__base__.html' %}

{% block title %}编辑日志{% endblock %}

{% block beforehead %}

<script>
Vue.directive("codemirror", {
    twoWay: true,
    bind: function () {
        // 请自行初始化CodeMirror, 可使用 $(this.el).data('codemirror')
        this.editor = editor;
        // model主动赋值标记
        this.silent = false;
        this.handler = function () {
            if (!this.silent) {
                this.set(this.editor.getValue(), true); // 加锁，防止相互赋值
            }
        }.bind(this);
        this.editor.on("change", this.handler);
    },
    update: function (value, oldValue) {
        this.silent = true;
        this.editor.setValue(this.vm.$data[this.raw]);
        this.silent = false;
    }
});
</script>
{% endblock %}

{% block section %}
	<li class="uk-active"><a href="/"><i class="uk-icon-home"></i>日志</a></li>
	<li><a href="/manage/blogs"><i class="uk-icon-wrench"></i>管理</a></li>
{% endblock %}

{% block content %}

<textarea id="codepad" v-codemirror="code"></textarea>

{% endblock %}